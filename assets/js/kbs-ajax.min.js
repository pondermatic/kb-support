function kbs_cust_read_reply(a){jQuery.post(kbs_scripts.ajaxurl,{action:"kbs_read_ticket_reply",reply_id:a})}var kbs_scripts;jQuery(document).ready(function(a){var b=a(".kbs_datepicker");if(b.length>0){var c="mm/dd/yy";b.datepicker({dateFormat:c})}kbs_scripts.is_submission&&(a(".kbs-select-chosen").chosen({inherit_select_classes:!0,placeholder_text_single:kbs_scripts.one_option,placeholder_text_multiple:kbs_scripts.one_or_more_option}),a(".kbs-select-chosen .chosen-search input").each(function(){var b=a(this).parent().parent().parent().prev("select.kbs-select-chosen"),c=b.data("search-placeholder");a(this).attr("placeholder",c)}),a(".chosen-choices").on("click",function(){var b=a(this).parent().prev().data("search-placeholder");"undefined"==typeof b&&(b=kbs_scripts.type_to_search),a(this).children("li").children("input").attr("placeholder",b)})),a(".kbs-accordian").collapse({toggle:!1}),a(document.body).on("click",".kbs-scroll",function(b){b.preventDefault();var c=a(this).attr("href");a("html, body").animate({scrollTop:a(c).offset().top},500)}),a(document).on("click","#kbs_ticket_form #kbs_ticket_submit",function(b){var c=document.getElementById("kbs_ticket_form");if("function"!=typeof c.checkValidity||!1!==c.checkValidity()){b.preventDefault(),a(this).val(kbs_scripts.submit_ticket_loading),a(this).prop("disabled",!0),a(this).after(' <span id="kbs-loading" class="kbs-loader"><img src="'+kbs_scripts.ajax_loader+'" /></span>'),a("input").removeClass("error");var d="undefined"!=typeof tinyMCE&&tinyMCE.activeEditor&&!tinyMCE.activeEditor.isHidden();d&&tinyMCE.triggerSave();var e=a("#kbs_ticket_form"),f=a("#kbs_ticket_form").serialize();a.ajax({type:"POST",dataType:"json",data:f,url:kbs_scripts.ajaxurl,success:function(b){b.error?(e.find(".kbs_alert_error").show("fast"),e.find(".kbs_alert_error").html(b.error),a("#kbs_ticket_submit").prop("disabled",!1),a("#kbs_ticket_form_submit").find("#kbs-loading").remove(),a("#kbs_ticket_submit").val(kbs_scripts.submit_ticket)):(e.append('<input type="hidden" name="kbs_action" value="submit_ticket" />'),e.get(0).submit())}}).fail(function(a){window.console&&window.console.log&&console.log(a)})}}),a(document).on("click",".ticket_reply_content",function(){var b=a(this).data("key");kbs_cust_read_reply(b)}),a(document.body).on("click","#kbs-replies-next-page",function(b){b.preventDefault();var c=a("#kbs-replies-next-page").data("ticket-id"),d=a("#kbs-replies-next-page").attr("data-load-page"),e={kbs_ticket_id:c,kbs_page:d,action:"kbs_load_front_end_replies"};a.ajax({type:"POST",dataType:"json",data:e,url:kbs_scripts.ajaxurl,beforeSend:function(){a(".kbs_replies_load_more").hide(),a("#kbs-replies-loader").html('<img src="'+kbs_scripts.ajax_loader+'" />')},success:function(b){a("#kbs-loading-replies").replaceWith(b.data.replies),a("#kbs-replies-loader").html(""),b.data.next_page>0&&b.data.next_page>d&&(a(".kbs_replies_load_more").show(),a("#kbs-replies-next-page").attr("data-load-page",b.data.next_page))}}).fail(function(a){window.console&&window.console.log&&console.log(a)})}),a(document).on("click","#kbs_ticket_reply_form #kbs_reply_submit",function(b){var c=document.getElementById("kbs_ticket_reply_form");if("function"!=typeof c.checkValidity||!1!==c.checkValidity()){b.preventDefault(),a(this).val(kbs_scripts.submit_ticket_loading),a(this).prop("disabled",!0),a(this).after(' <span id="kbs-loading" class="kbs-loader kbs-hidden"><img src="'+kbs_scripts.ajax_loader+'" /></span>'),a("input").removeClass("error");var d="undefined"!=typeof tinyMCE&&tinyMCE.activeEditor&&!tinyMCE.activeEditor.isHidden();d&&tinyMCE.triggerSave();var e=a("#kbs_ticket_reply_form"),f=a("#kbs_ticket_reply_form").serialize();a.ajax({type:"POST",dataType:"json",data:f,url:kbs_scripts.ajaxurl,success:function(b){b.error?(e.find(".kbs_alert").show("fast"),e.find(".kbs_alert").html(b.error),e.find("#"+b.field).addClass("error"),e.find("#"+b.field).focus(),a("#kbs_reply_submit").prop("disabled",!1),a("#kbs-loading").remove(),a("#kbs_reply_submit").val(kbs_scripts.reply_label)):(e.append('<input type="hidden" name="kbs_action" value="submit_ticket_reply" />'),e.get(0).submit())}}).fail(function(a){window.console&&window.console.log&&console.log(a)})}})});